<!--pages/settlement-view/settlement-view.wxml-->
<view class="page-container">
    <!-- 结算建议 -->
    <view class="card settlement-section">
        <view class="section-header">
            <text class="section-title">结算建议</text>
            <view class="header-actions">
                <text class="finalized-tag" wx:if="{{isFinalized}}">已结算</text>
            </view>
        </view>

        <!-- 结算列表 -->
        <view class="settlement-list">
            <view wx:for="{{settlements}}" wx:key="_id" class="settlement-item">
                <view class="settlement-info">
                    <view class="party">
                        <view class="member-avatar">
                            <image wx:if="{{item.fromAvatarUrl}}" src="{{item.fromAvatarUrl}}" mode="aspectFill" />
                            <view wx:else class="text-avatar">{{item.fromShortName || '成员'}}</view>
                        </view>
                        <text class="member-name">{{item.fromName}}</text>
                    </view>
                    <text class="arrow">→</text>
                    <view class="party">
                        <view class="member-avatar">
                            <image wx:if="{{item.toAvatarUrl}}" src="{{item.toAvatarUrl}}" mode="aspectFill" />
                            <view wx:else class="text-avatar">{{item.toShortName || '成员'}}</view>
                        </view>
                        <text class="member-name">{{item.toName}}</text>
                    </view>
                    <text class="settlement-amount">{{item.amount}}</text>
                </view>
                <view class="settlement-actions"></view>
            </view>

            <view class="empty-settlement" wx:if="{{settlements.length === 0}}">
                <text>暂无结算建议</text>
            </view>
        </view>


        <button class="btn-confirm" wx:if="{{showConfirmButton}}" bindtap="confirmSettlement">确认结算</button>
    </view>
</view>